lcr-modules:
    battenberg:
        inputs:
            # Available wildcards: {seq_type} {genome_build} {sample_id}
            sample_bam: "__UPDATE__"
            battenberg_script: "{MODSDIR}/src/battenberg_3.R"
            cnv2igv: "{SCRIPTSDIR}/cnv2igv/1.5/cnv2igv.py"
            src_dir: "{MODSDIR}/src/"

        scratch_subdirectories: []

        conda_envs:
            battenberg: "{MODSDIR}/envs/battenberg-1.3.yaml"
            wget: "{MODSDIR}/envs/wget-1.20.1.yaml"
            samtools: "{MODSDIR}/envs/samtools-1.9.yaml"
            bedtools: "{MODSDIR}/envs/bedtools-2.29.2.yaml"
            liftover: "{SCRIPTSDIR}/liftover/1.0/liftover.yaml"
            plink: "{MODSDIR}/envs/plink-1.9.yaml"

        options:
            liftover_script_path: "{SCRIPTSDIR}/liftover/1.0/liftover.sh"
            liftover_minMatch: "0.95" # Float number from 0 to 1 indicating minimal mapping when converting to a different genome build
            prefixed_projections: ["grch38", "hg38"] # List here the base names of chr-prefixed projections
            non_prefixed_projections: ["grch37", "hg19", "hs37d5"] # List here the base names of non-prefixed projections
            fill_segments_version: "1.1/"
            # specify in which projections you want the output files
            requested_projections: ["grch37", "hg38"]
            # List of ploidy constraint ranges to run Battenberg with. Each entry must be "MIN-MAX".
            # Example: ["1.6-4.8", "2.0-5.0"] will run two fit jobs per input.
            # The first entry is treated as the "canonical" ploidy for downstream outputs
            # (plots/seg files). The template default mirrors Battenberg's typical
            # defaults; users can override this list.
            ploidy_runs: ["1.6-4.8"]
            # Example with multiple ranges (runs two fits per input):
            # ploidy_runs: ["1.6-4.8", "2.0-5.0"]
            roh:
                # Minimum total depth at a site to emit a genotype in the fake VCF.
                min_dp: 12
                # Max minor-allele count to still call a homozygous genotype.
                hom_max_minor: 1
                # Minimum minor-allele count for a heterozygous call.
                min_minor_count: 3
                # BAF bounds for heterozygous calls (from normal counts).
                het_lo: 0.20
                het_hi: 0.80
                # PLINK ROH thresholds.
                # Both thresholds must be satisfied for a ROH segment to be reported.
                homozyg_kb: 1000
                homozyg_snp: 50

        resources:
            battenberg:
                mem_mb: 50000
                bam: 1
            battenberg_fit:
                mem_mb: 200000
                bam: 1
            infer_sex:
                mem_mb: 20000
                bam: 1
            reference:
                mem_mb: 8000
            post_battenberg:
                mem_mb: 2000
                bam: 1

        threads:
            battenberg: 24
            #ideal for processing all chromosomes at once
            battenberg_fit: 1
            #fitting uses no parallelization
            reference: 2
            

        pairing_config:
            genome:
                run_paired_tumours: True
                run_unpaired_tumours_with: null
                run_paired_tumours_as_unpaired: False
            capture:
                run_paired_tumours: True
                run_unpaired_tumours_with: null
                run_paired_tumours_as_unpaired: False
